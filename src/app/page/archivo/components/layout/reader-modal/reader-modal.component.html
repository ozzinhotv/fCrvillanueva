<!-- Overlay -->
<div class="fixed inset-0 z-[100] bg-black/70 backdrop-blur-sm" (click)="onClose()" aria-hidden="true"></div>

<!-- Dialog -->
<div class="fixed inset-0 z-[101] flex items-center justify-center p-4" role="dialog" aria-modal="true">
  <article class="w-full max-w-3xl max-h-[85vh] overflow-y-auto rounded-2xl bg-neutral-900 text-white border border-white/10 shadow-2xl">
    <header class="sticky top-0 z-10 bg-neutral-900/90 backdrop-blur p-4 border-b border-white/10 flex items-center justify-between">
      <div>
        <h2 class="text-xl font-semibold leading-tight">{{ item.title }}</h2>
        <p class="text-xs opacity-70">{{ item.author }} • {{ item.date | date:'longDate' }}</p>
      </div>
      <button type="button" (click)="onClose()" class="px-3 py-1 rounded-lg bg-white/10 hover:bg-white/20">
        Cerrar
      </button>
    </header>

    <section class="p-6 prose prose-invert max-w-none">
      <ng-container *ngIf="!loading && !error; else stateTpl">
        <!-- Texto estilo “libro” (por ahora sin parser de Markdown) -->
        <pre class="whitespace-pre-wrap text-base leading-7 font-normal">{{ content }}</pre>
      </ng-container>

      <ng-template #stateTpl>
        <div *ngIf="loading" class="animate-pulse h-48 bg-white/5 rounded-xl"></div>
        <div *ngIf="error" class="text-red-300">No se pudo cargar el contenido.</div>
      </ng-template>
    </section>
  </article>
</div>
